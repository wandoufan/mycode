# 数据库


## 关系型数据库
1. 基本定义
关系型数据库最主要的数据结构是二维表，通过二维表及表之间的联系来组成一个数据组织  
SQL(structured query lanuguage)，即结构化查询语句，属于关系型数据库  
注意：SQL是一个语言，并不是一种数据库  
2. 常见的关系型数据库主要包括：  
oracle、mysql、DB2、Microsoft sql server、Microsoft Access、SQLLite  
3. 优点
3.1 易于维护，都是使用格式一致的表结构存储  
3.2 使用方便，都支持使用SQL语言进行操作  
3.3 可以进行多表之间的复杂查询  
3.4 事务操作可以保证数据的一致性和完整性  
4. 缺点
4.1 只能从磁盘中读取数据，读写性能一般  
4.2 对海量数据的增删改查性能一般  
4.3 只能支持基础类型的数据  
4.5 数据之间复杂的关系不利于后期的扩展  
5. 应用场景
一般量级的、对数据安全性要求很高的场景  


## 非关系型数据库
1. 基本定义
非关系型数据库最主要的数据结构是key-value，数据以对象的形式存储在数据库中，而对象之间的的关系通过每个对象自身的属性来决定  
2. 常见的非关系型数据库主要包括：  
redis、mongo DB、Neo4j  
3. 优点
3.1 可以直接从内存中读取数据，无需经过sql层解析，读写性能很高  
3.2 key-value的结构支持多种value类型，包括文档形式和图片形式  
3.3 数据和数据之间没有关系，也不存在耦合性，易于扩展  
4. 缺点
4.1 数据结构较为复杂，不合适复杂查询  
4.2 不支持sql语言，每种no-sql数据库都要单独学习  
4.3 没有事务关系，无法保证数据的一致性和完整性  
5. 应用场景
海量级数据、对数据安全性要求不敏感的场景  


## 常用关系型数据库对比
**Access**
1. 基本情况
Access是微软开发的产品，属于小型数据库，常用来做数据分析等  
2. 优点
体积小，操作简单灵活  
3. 缺点
不支持高并发，用户量大或数据量大时性能会迅速下降  
**sql server**
1. 基本情况
sql server是微软开发的产品，属于中小型数据库  
采用C/S架构  
2. 优点
在多用户时具有较好的性能表现  
在windows平台下与相关软件集成度高  
3. 缺点
sql server只能在windows平台上运行  
**mysql**
1. 基本情况
mysql是中小型数据库，已被Oracle收购  
mysql的客户端和命令窗口，都是由数据库决定内容  
2. 优点
mysql是开源的数据库，提供的接口支持多种语言连接操作  
体积小，运行速度非常快  
成本较低，免费使用或价格很低  
mysql可以在多个主流平台上运行  
3. 缺点
不支持热备份  
不支持事务处理、过程存储、触发器、视图、外键、子查询(subselect)  
**oracle**
1. 基本情况
oracle是大型数据，适用于大项目  
oracle的客户端和命令窗口，都是由用户决定内容  
2. 优点
oracle可以在所有主流平台上运行  
性能高，安全性好，支持大并发量的访问  
3. 缺点
价格昂贵，体积庞大，对硬件性能要求较高  
管理维护的操作比较复杂  
**sqlite**
1. 基本情况
sqlite是一个微型数据库，所有的数据表、索引等数据库元素全部都存在一个文件里  
sqlite expert是sqlite数据库的可视化管理工具，包含了sqlite数据库驱动  
即安装了sqlite expert之后就无需再安装sqlite数据库驱动  
备注：QT自带了sqllite数据库，无需再进行安装  
2. 优点
sqlite是开源免费的  
体积很小，sqlite的驱动库文件只有500KB  
性能很高，对数据访问速度甚至超过了mysql  
无需服务器，无需进行任何的配置或安装，使用简单方便  
sqlite可以跨平台使用，在不同平台之间可以随意复制数据库  
3. 缺点
不能支持大量的数据和高并发用户量  

## 数据模型的组成:
1. 数据结构：是对系统的静态描述，包括数据的内容、类型、性质
2. 数据操作：是对系统动态特征的描述，包括对数据库对象示例的各种操作
3. 完整性约束：是完整性规则的合集


## 常见的数据模型：
1. 层次模型：用树状结构来表示实体类型和实体之间的联系
2. 网状模型：用有向图结构表示实体类型和实体之间的联系
3. 关系模型：用二维表来描述数据，是目前主流的数据库


## 关系模型的相关概念：
1. 关系：一个二维表就是一个关系
2. 元组：二维表中的一行，即表中的记录
3. 属性：二维表中的一列，用类型和值表示
4. 域：每个属性取值的变化范围


## 范式的概念：
1. 第一范式(1NF)：
在一个关系中没有重复字段，且每个字段都是不可再分的；有主键字段，且主键字段不能为空  
例如：三年级二班字段可以拆分为年级和班级两个字段，因此不符合第一范式  
例如：联系方式字段可以拆分为手机和座机两个字段，因此不符合第一范式  
2. 第二范式(2NF)：
在第一范式的基础上要求关系中每个非主键的字段都完全依赖于主键字段  
第二范式要求不能有部分依赖，即不能有(B,C)->A，B和C两个字段合起来才对A有依赖称为部分依赖  
第二范式要求将描述不同信息的表尽可能拆分开  
例如：学生表中如果有与主键学号无依赖关系的老师字段，就不符合第二范式  
3. 第三范式(3NF)：
在第二范式的基础上要求关系中非关键字段之间不存在传递依赖  
如果存在关键字段A决定非关键字段B，而非关键字段B又决定非关键字段C，则称非关键字段C传递函数依赖于关键字段A  
例如：工号-->(姓名,年龄,部门,部门经理)，这个关系符合第二范式  
但是其中隐藏着关系:工号-->部门-->部门经理，因此不符合第三范式  
4. 巴斯范式(BCNF):
可以看做是修正的第三范式，包括以下特点  
所有非主属性对每一个候选键都是完全函数依赖  
所有的主属性对每一个不包含它的候选键，也是完全函数依赖  
没有任何属性完全函数依赖于非候选键的任何一组属性  
备注：按照高的范式标准设计，可以消除数据冗余，增删改查时的异常  


## 数据库的三级模式结构
1. 模式
模式也称为逻辑模式或概念模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图，一个数据库只有一个视图，处于中间层  
2. 外模式
外模式也称为用户模式，是数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图外模式是模式的子集，数据库可以有多个外模式  
3. 内模式
内模式也称为存储模式，是数据物理结构和存储方式的描述，是数据在数据库内部的表示方式，一个数据库只有一个内模式  


## 数据库管理系统两层映射
1. 外模式/模式映射
保证数据库系统中的数据具有较高的逻辑独立性  
2. 模式/内模式映射
保证数据库系统中的数据具有较高的物理独立性  


## 数据库的常用对象:
1. 表
包含数据库中所有数据的数据库对象，由行和列组成，用于组织和存储数据  
2. 字段
表中的每一列称为一个字段，字段有自己的属性，sql支持五种基本的字段类型：字符型，文本型，数值型，逻辑型，时间日期型  
3. 索引
依赖于表建立，使查找时无需对整个表进行扫描就可以找到所需的数据  
4. 视图
从一张表或多张表中导出的虚拟表，是用户查询目标数据的结果  
5. 存储过程
是一组为完成特定功能的sql语句集合  
