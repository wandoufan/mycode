# QT中的编码问题

## 中文显示乱码问题
问题描述：
中文变量用qDebug()输出到控制台，或者显示到UI界面上都会显示为乱码  
1. 解决方法1
步骤1：  
QTcreator界面点击工具–选项，选择文本编辑器—行为一栏，找到文件编码格式模块  
默认编码选择'utf-8'，下面的utf-8 BOM选项更改为'如果编码是utf-8则添加'  
步骤2：  
在头文件中加入以下代码  
```
#if _MSC_VER >= 1600
#pragma execution_character_set("utf-8")
#endif
```
步骤3：  
对项目进行清理，然后重新构建

2. 解决方法2
有时候用MSVC 2015 64位编译器有问题，但用MinGW 32位编译器就没问题


## 报错"C2001:newline in constant"
1. 问题描述
在构造函数中给窗口设置了一个中文的标题，然后运行时就有报错，其中代码本身并没有任何错误  
备注：这个问题仅当汉字的个数是奇数个时出现，如果把汉字改为偶数个就不会报错  
```
setWindowTitle("Qt多线程应用测试");
```
2. 解决方法
QTcreator界面点击工具–选项，选择文本编辑器—行为一栏，找到文件编码格式模块  
默认编码选择utf-8，下面的utf-8 BOM选项更改为如果编码是utf-8则添加  
3. 解决办法
尝试一下用QStringLiteral()来把奇数个字符串包起来  
4. 说明
有时候即使进行了编码的设置，也还是会有该报错，只能把字数改为偶数个  