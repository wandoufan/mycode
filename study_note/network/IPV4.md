# IPV4

## IP地址
IP地址是一个32位(4字节)的二进制数，通常被分割为4个字段  
IP地址 = 网络地址 + 主机地址或IP地址 = 网络地址 + 子网地址 + 主机地址  
例如，IP地址(192.168.1.1) = 网络地址(192.168.1.0) + 主机地址(0.0.0.1)  
一般计算机中填写的IP都是私有地址，不能直接在互联网上使用，必须先转换为公有地址  
私有地址一般常用于内网范围，而除了私有地址之外的均可以用于公网范围  


## A类IP地址
A类IP地址 = 1字节的网络地址 + 3字节主机地址  
网络地址的最高位必须是'0'，地址范围从1.0.0.0 ~ 126.0.0.0  
其中私有A类IP地址范围从10.0.0.0 ~ 10.255.255.255  
可用的A类网络有126个，每个网络能容纳1677214个主机  
备注：A类IP地址一般给政府机构使用  


## B类IP地址
B类IP地址 = 2字节的网络地址 + 2字节主机地址  
网络地址的最高位必须是'10'，地址范围从128.0.0.0 ~ 191.255.255.255  
其中私有B类IP地址范围从172.16.0.0 ~ 172.31.255.255  
可用的B类网络有16382个，每个网络能容纳6万多个主机  
备注：B类地址一般分配给大公司使用  


## C类IP地址
C类IP地址 = 3字节的网络地址 + 1字节主机地址  
网络地址的最高位必须是'110'，地址范围从192.0.0.0 ~ 223.255.255.255  
其中私有C类IP地址范围从192.168.0.0 ~ 192.168.255.255  
可用的C类网络有209万余个网络，每个网络能容纳254个主机  
备注：C类IP地址分配给任何需要的人，适用于小型局域网，是内网中最常用的IP地址  


## D类IP地址
网络地址的最高位必须是'1110'，这是一个专门保留的地址  
D类地址不指向特定的网络，一般用在多点广播中  


## E类IP地址
网络地址的最高位必须是'11110'，为将来使用保留   


## 特殊的IP地址
1. 127.0.0.1
本机地址，一般用于测试，在Windows系统中别名为'Localhost'  
2. 255.255.255.255
对本机来说，这个地址指本网段内(同一广播域)的所有主机  
这是一个限制广播地址，该地址不能被路由器转发  
3. 0.0.0.0
所有不清楚主机和目的网络的路由，都会被收容到这个地址  


## 子网掩码
1. 基本定义
子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩  
子网掩码是一个32位(4字节)的二进制数，通常被分割为4个字段  
子网掩码不能单独存在，它必须结合IP地址一起使用  
注意：对于一个合法的子网掩码，它的二进制中1和0必须是连续的  
2. 功能作用
子网掩码最重要的作用，就是将某个IP地址划分成网络地址和主机地址两部分  
子网掩码是在IPv4地址资源紧缺的背景下为了解决IP地址分配而产生的虚拟IP技术  
通过子网掩码将A、B、C三类地址划分为若干子网，从而显著提高了IP地址的分配效率，有效解决了IP地址资源紧张的局面  
3. 工作原理
子网掩码告知路由器，地址的哪一部分是网络地址，哪一部分是主机地址，使路由器正确判断任意IP地址是否是本网段的，从而正确地进行路由  
4. 使用方法
将子网掩码与IP地址进行二进制形式的按位逻辑'与'运算得到的便是网络地址  
将子网掩码二进制按位取反，然后与IP地址进行逻辑'与'运算，得到的就是主机地址  
5. 常用子网掩码
A类地址默认子网掩码为255.0.0.0
B类地址默认子网掩码为255.255.0.0
C类地址默认子网掩码为255.255.255.0


## 网关
1. 基本定义
从一个网络向另一个网络发送信息，也必须经过一道关口，这道关口就是网关  
就好像一个房间可以有多扇门一样，一台主机可以有多个网关  
网关既可以用于广域网互连，也可以用于局域网互连  
2. 工作原理
当一台计算机发送信息时，根据发送信息的目标地址，通过子网掩码来判定目标主机是否在本地子网中，如果目标主机在本地子网中，则直接发送即可  
如果目标不在本地子网中则将该信息送到缺省网关/路由器，由路由器将其转发到其他网络中，进一步寻找目标主机  
3. 默认网关/缺省网关
默认网关的意思是一台主机如果找不到可用的网关，就把数据包发给默认指定的网关，由这个网关来处理数据包  
最常用的默认网关就是192.168.1.1以及192.168.0.1  