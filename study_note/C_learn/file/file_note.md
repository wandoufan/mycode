# C语言中的文件操作

## 基本说明
1. 在C语言中，为了统一对硬件进行操作，把不同的硬件设备也看做成一个文件
2. 使用之前要'#include<stdio.h>'


## 按数据组织方式分类
### 1. 文本文件(ASCII文件)
1. 概念
文本文件中每一个字节用来保存一个ASCII码值
例如：txt文件，可以用记事本打开
2. 优点
文本文件便于对字符进行逐个处理，也便于输出字符
3. 缺点
一般来说，文本文件比二进制文件占用空间更多，而且需要花费时间进行格式转换

### 2. 二进制文件
1. 概念
二进制文件将数据以二进制形式存放在文件中，保持了数据在内存中存放时的原有格式(类似于json格式)
一般来说，内存中的数据需要临时保存到外存，之后又需要输入到内存的，常用二进制文件保存
例如：图像、视频、可执行文件等，用记事本打开会显示为乱码
备注：实际测试发现，以二进制形式写入的字符数组(中文或英文或数字)，用记事本打开显示正常，而整型数组就会显示为乱码
备注：二进制文本的后缀不一定要是txt，可以是dat、aaa等任意后缀
2. 优点
更节省存储空间，也不需要进行格式转换
3. 缺点
一个字节并不对应一个字符，不能直接输出字符形式


## 按文件处理方式分类
1. 顺序处理
指针从文件的第一个字符开始，顺序处理到文件的最后一个字符，这样处理的文件称为顺序文件
2. 随机处理
在文件中通过C++相关的函数来移动文件指针，这样处理的文件称为随机文件


## 文件类型指针FILE
1. 基本概念
每个被使用的文件都在内存中开辟一个区域来存放文件的相关信息(文件名、文件状态、当前读写位置等)，这些信息会被保存到一个FILE类型的结构体变量中
打开文件就是获取文件的相关信息，关闭文件就是断开与文件之间的联系，释放结构体变量，同时禁止再对该文件进行操作
例如，定义一个FILE类型的结构体数组，它有5个元素，可以存放5个文件的信息
```
FILE f[5];
```
2. 定义一个FILE类型的文件指针
```
FILE * fp;
fp = fopen("D:\\share\\config.dat", "r+");
```
3. fopen函数
fopen函数打开文件成功则返回一个文件指针，打开文件失败则返回一个空指针
```
if(fp == NULL)
{
	prinf("open failed\n");
	exit(0);
}
```
4. fclose函数
fclose(文件指针)函数关闭文件成功则返回0，失败则返回EOF(-1)
如果文件使用完毕后没有关闭，可能会造成缓冲区中待写入的数据丢失
```
fclose(fp);
```


## 文件的打开方式
备注：t为文本文件方式打开，默认就是文本文件方式，因此t可以不写
备注：有的C编译系统不能支持下面所有的打开方式
1. r
只读打开一个文本文件，文件在打开之前必须存在，否则报错
2. w
只写(覆盖写)打开一个文本文件，如果文件在打开之前不存在，则会新建一个文件
3. a
追加打开，向文本文件末尾添加数据，如果文件在打开之前不存在，则会新建一个文件
4. rb
只读打开一个二进制文件，文件在打开之前必须存在，否则报错
5. wb
只写(覆盖写)打开一个二进制文件，如果文件在打开之前不存在，则会新建一个文件
6. ab
追加打开一个二进制文件，如果文件在打开之前不存在，则会新建一个文件
7. r+
读写打开一个文本文件，文件在打开之前必须存在，否则报错
8. w+
读写(覆盖写)打开一个文本文件，如果文件在打开之前不存在，则会新建一个文件
9. a+
读写(追加)打开，向文本文件末尾添加数据，如果文件在打开之前不存在，则会新建一个文件
10. rb+
读写打开一个二进制文件，文件在打开之前必须存在，否则报错
11. wb+
读写(覆盖写)打开一个二进制文件，如果文件在打开之前不存在，则会新建一个文件
12. ab+
读写(追加)打开，向二进制文件末尾添加数据，如果文件在打开之前不存在，则会新建一个文件


