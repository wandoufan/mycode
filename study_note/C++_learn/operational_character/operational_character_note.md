# C++中的运算符

## >>和<<
和C语言中的一致，C++中'>>'和'<<'也是二进制左移/右移运算符  
另外，在C++中这两个运算符被重载了，还可以用作输入输出流  
注意：'<<'还可以用来向列表中直接输入数据，相当于append()  
```
QList<QString> aList;
alist << "a " << "b " << "c " << "d ";
QString str1;
str1 = alist.join(".");
```


## 赋值运算符
由赋值运算符(即'=')将一个变量和一个表达式连接起来的式子称为赋值表达式  
赋值表达式一般形式为"变量 赋值运算符 表达式"，例如a = 3  
左边只能是变量，不能是常量或其他表达式，右边的表达式应该由一个明确的值  
赋值表达式中的表达式又可以是另一个赋值表达式，例如a = (b = 5)，最后结果是a值为5  


## 逗号运算符
逗号运算符又称为顺序求值运算符  
用逗号运算符(即',')讲两个表达式连接起来称为逗号表达式，一般形式为"表达式1, 表达式2"  
求解过程为先求解表达式1，再求解表达式2，整个逗号表达式的值是表达式2的值  
例如，"3+5, 6+8"的值为14，"a=3\*5, a\*4"的值为60  
一个逗号表达式又可以与另一个表达式组成一个新的逗号表达式  
例如，"(a=3\*5, a\*4), a+5"的值为20  
逗号表达式可以扩展为"表达式1, 表达式2, 表达式3,...,表达式n"，其值为表达式n的值  
注意：并不是所有逗号都是作为逗号运算符，有的逗号只是用来做间隔的  
例如："printf("%d, %d, %d", a, b, c)"


## 条件运算符
条件运算符也称为三元运算符，一般形式为 表达式1 ? 表达式2 : 表达式3  
C语言中的写法： max = (a > b)? a : b;
python中的写法： max = a if a > b else b


## sizeof
**说明事项**
注意：sizeof是一个运算符，不是函数  
sizeof在C语言和C++中都有使用，查看变量或常量所占内存空间的字节数  
备注：同样的数据在不同的编译器和操作环境下所占内存空间可能不同  
**两种调用方式**
1. sizeof(<表达式>) 例如：sizeof("hello");
2. sizeof(<数据类型>) 例如:sizeof(int);


## '->'和'.'的比较
'->'用来表示指向实例化对象的指针的成员  
'.'用来表示一般实例化对象的成员  
```
Student * p1, s1; //p1是一个指向Stdent类的实例化对象的指针
p1 = & s1; //p1指针指向s1对象
s1.age = 18; //通过对象直接访问成员
p1 -> age = 18; //通过指针访问成员时只能使用'->'
```
以下两种表示方式是等价的：  
1. 对象指针名 -> 成员变量(或方法)
2. * 对象指针名 . 成员变量(或方法)


## ::运算符
**说明事项**
'::'是C++所有运算符中等级最高的，用来表示作用域和所属关系  
备注：C语言中没有'::'符号  
**三种功能**
1. class scope 类作用域符
::作为类作用域符时，前面一般是类名，后面一般是类的成员名，即class::name  
C++为了避免不同的类有名称相同的成员产生冲突，采用了作用域的方式进行区分  
例如，A,B表示两个类，A,B中都有成员num  
A::num表示A中num成员，B::num表示B中num成员，相当于域成员运算符B.num  
例如，在A类中声明了一个成员函数func()，但没有在类内部进行具体的函数定义  
在类A外部进行函数定义时就要写成int A::func()，来表示func()是A的成员函数  
```
class A{
	public: int func();
}
int A::func() //'::'表示func()是A类的成员函数
{
	return 0;
}
```
2. global scope 全局作用域符号
如果内层和外层的变量同名，且需要在内层引用外层的同名变量，则需要用'::'来声明外层变量  
备注：用'::'声明的外层变量必须是最外层全局变量  
```
# include <iostream>
using namespace std;

int i = 10;  //最外层A
int main()
{
	int i = 20;  //中间层B
	{
		int i = 5;  //最内侧C
		int j;
		::i = ::i + 1;  //注意这里的::i是A层中的i，不是B层中的i
		j = ::i + i;
		cout << ::i << "   " << j << endl;  //11   16
	}
	cout << ::i << "   " << i << endl;  //11   20
	return 0;
}
```
3. namespace scope 命名空间作用域符
使用'::'运算符来声明引入某个命名空间的某个标识符
```
//A是一个命名空间，用'::'来表示变量a和函数func()是A中定义的
cout << A::a << endl;
A::func();
```


## 运算符的优先级
* 优先级--运算符--名称或含义--使用形式--结合方向--说明
备注：同一优先级的运算符，运算次序由结合方向决定  
1.
[]  数组下标 数组名[常量表达式] 左到右  
()  圆括号 （表达式）/函数名(形参表) 左到右  
.   域成员运算符（对象） 对象.成员名 左到右  
->  成员选择（指针）对象指针->成员名 左到右  
++  后置自增运算符 ++变量名 左到右 单目运算符  
--  后置自减运算符 --变量名 左到右 单目运算符  
2. 
-     负号运算符 -表达式 右到左 单目运算符  
(类型) 强制类型转换 (数据类型)表达式 右到左  
++    前置自增运算符 变量名++ 右到左 单目运算符  
--    前置自减运算符 变量名-- 右到左 单目运算符  
*     取值运算符 \*指针变量 右到左 单目运算符  
&     取地址运算符 &变量名 右到左 单目运算符  
!     逻辑非运算符 !表达式 右到左 单目运算符  
~     按位取反运算符 ~表达式 右到左 单目运算符  
sizeof长度运算符 sizeof(表达式) 右到左  
3.
/   除 表达式/表达式 左到右 双目运算符  
*   乘 表达式*表达式 左到右 双目运算符  
%   余数（取模）整型表达式/整型表达式 左到右 双目运算符  
4.
+   加 表达式+表达式 左到右 双目运算符  
-   减 表达式-表达式 左到右 双目运算符  
5.
<<  左移 变量<<表达式 左到右 双目运算符  
>>  右移 变量>>表达式 左到右 双目运算符  
6.
>   大于 表达式>表达式 左到右 双目运算符  
>=  大于等于 表达式>=表达式 左到右 双目运算符  
<   小于 表达式<表达式 左到右 双目运算符  
<=  小于等于 表达式<=表达式 左到右 双目运算符  
7.
==  等于 表达式==表达式 左到右 双目运算符  
!=  不等于 表达式!= 表达式 双目运算符  
8.
&   按位与 表达式&表达式 左到右 双目运算符  
9.
^   按位异或 表达式^表达式 左到右 双目运算符  
10.
|   按位或 表达式|表达式 左到右 双目运算符  
11.
&&  逻辑与 表达式&&表达式 左到右 双目运算符  
12.
||  逻辑或 表达式||表达式 左到右 双目运算符  
13.
?:  条件运算符 表达式1? 表达式2: 表达式3 右到左 三目运算符  
14
=   赋值运算符 变量=表达式 右到左  
/=  除后赋值 变量/=表达式 右到左  
*=  乘后赋值 变量*=表达式 右到左  
%=  取模后赋值 变量%=表达式 右到左  
+=  加后赋值 变量+=表达式 右到左  
-=  减后赋值 变量-=表达式 右到左  
<<= 左移后赋值 变量<<=表达式 右到左  
>>= 右移后赋值 变量>>=表达式 右到左  
&=  按位与后赋值 变量&=表达式 右到左  
^=  按位异或后赋值 变量^=表达式 右到左  
|=  按位或后赋值 变量|=表达式 右到左  
15.
,   逗号运算符 表达式,表达式,… 左到右 从左向右顺序运算  