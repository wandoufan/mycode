# 内联函数inline

## 基本概念
用inline声明的内联函数可以把函数体直接插入到调用处，将调用函数的方式改为顺序执行直接插入的代码  
内联函数的使用方法和普通函数相同，只是在定义时需要在类型前面用inline关键字声明  
```
inline int inline_test(int a, int b)
```


## 内联函数的作用
一般的函数调用过程需要经过初始化，执行函数体，结束后清理内存等多个过程  
这样的调用过程开销比较大，对于函数体较小且需要经常调用的函数使用这种方式性价比不高  
内联函数的调用过程不需要通过普通的函数调用机制，而是直接将函数体插入到调用处  
使用内联函数，可以减少程序的执行时间，但同时增加了代码的实际长度  
内联函数一般都是可以在几行之内写完的小函数，常用来替代带参数的宏定义  


## 内联函数的使用限制
1. 内联函数中不能含有数组定义，也不能有任何静态类型  
2. 内联函数中不能含有循环、switch和复杂嵌套的if语句  
3. 内联函数不能是递归函数  
备注：当编译器认为声明的内联函数不适合用内联方式时，就会自动转为普通调用方式  


## 内联函数的应用场景
1. 在类内部定义的成员函数  
类内定义的成员函数可以不用手动声明为inline，因为编译器一般都会默认设置为内联函数  
2. 在类内部声明，外部定义的函数  
在类内部声明时不加inline关键字，而类外部定义时要加上inline关键字  


## 内联函数和宏定义的对比
**相同点**
1. 使用时都是直接替换，没有调用的开销，效率很高  
**不同点**
1. 内联函数是一个标准的函数，使用时会检查参数类型等  
但宏定义只是做简单的文本替换，不会检查参数类型，存在隐患  
2. 宏定义是编译前由预处理器对宏进行替换，内联函数是编译时由编译器来实现的  