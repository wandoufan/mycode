# 函数签名function signature

## 基本概念
函数签名用来提供一个函数的信息，包括函数名、参数类型、参数个数、顺序以及它所在的类和命名空间  


## 函数签名的作用
函数名字并不包含函数返回值部分，如果两个函数仅仅只有函数返回值不同，那么系统是无法区分这两个函数的  
当函数重载时，会有多个函数名相同的函数出现；在不同的命名空间下，也可能会有同名函数出现，函数签名就是用来帮助编译器识别这些函数  


## 编译器的修饰过程
在编译器及链接器处理标识符时，使用某种名称修饰的方法，使得每个函数签名对应一个修饰后名称(decorated name)  
这个decorated name作为函数的唯一标识，因此对于不同函数签名的函数，即使函数名相同，编译器和链接器都认为它们是不同的函数  
不同的编译器厂商的名称修饰方法可能不同，所以不同的编译器对于同一个函数签名可能对应不同的修饰后名称  


## 常见编译器修饰方法
1. GCC编译器
所有的符号都以"\_Z"开头，对于嵌套的名字（在名称空间或在类里面的），后面紧跟"N"，然后是各个名称空间和类的名字，每个名字前是名字字符串长度，再以"E"结尾  
对于一个函数来说，它的参数列表紧跟在"E"后面，对于int类型来说，就是字母"i"  
```
int func(int) ---> _Z4funci  
float func(float) ---> _Z4funcf  
int C::func(int) ---> _ZN1C4funcEi  
```
2. Visual C++编译器
修饰后名字由"?"开头，接着是函数名由"@"符号结尾的函数名；后面跟着由"@"结尾的类名"C"和名称空间"N"，再一个"@"表示函数的名称空间结束  
第一个"A"表示函数调用类型为"\__cdecl"，接着是函数的参数类型及返回值，由"@"结束，最后由"Z"结尾  
```
int func(int) ---> ?func@@YAHH@Z
float func(float) ---> ?func@@YAMM@Z
int C::func(int) ---> ?func@C@@AAEHH@Z
```
备注：Visual C++的名称修饰规则并没有对外公开，一般情况下我们也无须了解这套规则  